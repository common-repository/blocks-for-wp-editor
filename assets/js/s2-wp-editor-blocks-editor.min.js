!function(e){var t={};function n(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(l,o,function(t){return e[t]}.bind(null,o));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.primitives},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=window.wp.coreData},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.jQuery},function(e,t){e.exports=window.wp.apiFetch},function(e,t,n){"use strict";n.r(t);var l=n(0),o=n(7),a=n(4),r=n(8),s=n(2),i=n(6),c=n(5),p=n(1),d=n(3),u=Object(l.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(d.Path,{d:"M4 9v6h14V9H4zm8-4.8H4v1.5h8V4.2zM4 19.8h8v-1.5H4v1.5z"})),b=Object(l.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(d.Path,{d:"M5 15h14V9H5v6zm0 4.8h14v-1.5H5v1.5zM5 4.2v1.5h14V4.2H5z"})),m=Object(l.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(d.Path,{d:"M6 15h14V9H6v6zm6-10.8v1.5h8V4.2h-8zm0 15.6h8v-1.5h-8v1.5z"})),g=n(9),O=(n(11),n(10)),j=n.n(O);Object(o.registerBlockType)("s2-wp-editor-blocks/post",{apiVersion:2,title:Object(s.__)("Posts by type"),description:Object(s.__)("Display posts by type, choose settings for columns in row, filters & many more"),icon:"admin-post",category:"widgets",supports:{align:!0,html:!1},attributes:{postTemplateColumn:{type:"number",default:1},postType:{type:"string",default:"post"},order:{type:"string",default:"desc"},orderBy:{type:"string",default:"date"},categories:{type:"array",items:{type:"object"}},selectedAuthor:{type:"number",default:1},postsToShow:{type:"number",default:5},postTitleAlign:{type:"string",enum:["left","center","right"],default:"left"},postTitleLength:{type:"number",default:5},displayPostAuthor:{type:"boolean",default:!1},displayPostDate:{type:"boolean",default:!1},displayPostContent:{type:"boolean",default:!1},postContentAlign:{type:"string",enum:["left","center","right"],default:"left"},displayPostContentRadio:{type:"string",default:"content"},postContentLength:{type:"number",default:55},displayFeaturedImage:{type:"boolean",default:!1},featuredImageSizeSlug:{type:"string",default:"thumbnail"},featuredImageAlign:{type:"string",enum:["left","center","right"],default:"left"},addLinkToFeaturedImage:{type:"boolean",default:!1}},edit:({attributes:e,setAttributes:t})=>{var n="is-grid";1==e.postTemplateColumn?n+=" columns-1":2==e.postTemplateColumn?n+=" columns-2":3==e.postTemplateColumn&&(n+=" columns-3");const o=Object(i.useBlockProps)({className:n});var d="";const g=Object(a.useSelect)(t=>{var n=e.categories&&e.categories.length>0?e.categories.map((function(e){return e.id})):[];return d={categories:n,author:[e.selectedAuthor],order:e.order,orderby:e.orderBy,per_page:e.postsToShow,status:"publish"},t(r.store).getEntityRecords("postType",e.postType,d)},[e]),O=Object(a.useSelect)(t=>(d={per_page:-1,hide_empty:!0,type:e.postType},t("core").getEntityRecords("root","taxonomy",d)),[e]);var h="";O&&O.map((e,t)=>{!0===e.hierarchical&&(h=e.slug)});const f=Object(a.useSelect)(e=>(d={per_page:-1,hide_empty:!0},h?e("core").getEntityRecords("taxonomy",h,d):[]),[h]),_=Object(a.useSelect)(e=>(d={per_page:-1},e("core").getEntityRecords("root","user",d)),[]),w=Object(a.useSelect)(e=>e("core").getEntityRecords("root","postType"),[]),C=Object(l.createElement)(y,{posts:g,authors:_,attributes:e});return Object(l.createElement)("div",null,Object(l.createElement)(i.InspectorControls,{key:"s2-wp-editor-blocks/post-setting"},Object(l.createElement)("div",{id:"s2-wp-editor-blocks/post-control"},function(e,t){const n=Object(c.withState)({postTemplateColumn:e.postTemplateColumn})(({postTemplateColumn:e,setState:n})=>Object(l.createElement)(p.RangeControl,{label:Object(s.__)("Number of columns"),value:e,onChange:e=>{t({postTemplateColumn:e})},min:1,max:3}));return Object(l.createElement)(p.Panel,null,Object(l.createElement)(p.PanelBody,{title:Object(s.__)("Post Template Settings"),initialOpen:!0},Object(l.createElement)(p.PanelRow,null,Object(l.createElement)(n,null))))}(e,t),function(e,t,n,o,a){const r=Object(c.withState)({postType:o.postType,orderBy:o.orderBy,order:o.order,postsToShow:o.postsToShow,selectedAuthor:o.selectedAuthor,categories:o.categories})(({postType:o,orderBy:r,order:i,postsToShow:c,selectedAuthor:d,categories:u,setState:b})=>{var m=["page","attachment","wp_block"],g=[],O={};e&&(e.map((e,t)=>{-1===j.a.inArray(e.slug,m)&&(g[t]={label:e.name,value:e.slug})}),O=e.reduce((e,t)=>(e[t.slug]=t,e),{}));var y=[],h=!1;O[o]&&O[o].supports.author&&(h=O[o].supports.author),n&&h&&n.map((e,t)=>{y[t]={label:e.name,value:e.id}});let f="";t&&(f=t.reduce((e,t)=>(e[t.name]=t,e),{}));var _=[];return u&&(_=u.map(e=>({id:e.id,value:e.name||e.value}))),Object(l.createElement)("div",null,Object(l.createElement)(p.SelectControl,{label:Object(s.__)("Post Type"),value:o,options:g,onChange:e=>{a({postType:e})}}),Object(l.createElement)(p.SelectControl,{label:Object(s.__)("Order by"),value:r+":"+i,options:[{label:Object(s.__)("Oldest to Newest"),value:"date:desc"},{label:Object(s.__)("Newest to Oldest"),value:"date:asc"},{label:Object(s.__)("A -> Z"),value:"title:asc"},{label:Object(s.__)("Z -> A"),value:"title:desc"}],onChange:e=>{var t=e.split(":");a({orderBy:t[0]}),a({order:t[1]})}}),Object(l.createElement)(p.RangeControl,{label:Object(s.__)("Number of items"),value:c,onChange:e=>{a({postsToShow:e})},min:1,max:10}),Object(l.createElement)(p.SelectControl,{label:Object(s.__)("Select Author"),value:d,options:y,onChange:e=>{a({selectedAuthor:e})}}),Object(l.createElement)(p.FormTokenField,{label:Object(s.__)("Categories"),value:_,suggestions:Object.keys(f),maxSuggestions:20,onChange:e=>{if(!e.some(e=>"string"==typeof e&&!f[e])){var t=e.map(e=>"string"==typeof e?f[e]:e);a({categories:t})}}}))});return Object(l.createElement)(p.Panel,null,Object(l.createElement)(p.PanelBody,{title:Object(s.__)("Filter Settings"),initialOpen:!0},Object(l.createElement)(p.PanelRow,null,Object(l.createElement)(r,null))))}(w,f,_,e,t),function(e,t,n){const o=Object(c.withState)({postType:t.postType,postTitleAlign:t.postTitleAlign,postTitleLength:t.postTitleLength,displayPostAuthor:t.displayPostAuthor,displayPostDate:t.displayPostDate})(({postType:o,postTitleAlign:a,postTitleLength:r,displayPostAuthor:i,displayPostDate:c,setState:d})=>{var g={};e&&(g=e.reduce((e,t)=>(e[t.slug]=t,e),{}));var O=!1;return g[o]&&g[o].supports.author&&(O=g[o].supports.author),O||(i=!1),Object(l.createElement)("div",null,Object(l.createElement)(p.ToolbarGroup,{label:Object(s.__)("Alignment")},Object(l.createElement)(p.ToolbarButton,{icon:u,label:Object(s.__)("Align left"),isPressed:"left"==t.postTitleAlign,onClick:()=>{n({postTitleAlign:"left"})}}),Object(l.createElement)(p.ToolbarButton,{icon:b,label:Object(s.__)("Align center"),isPressed:"center"==t.postTitleAlign,onClick:()=>{n({postTitleAlign:"center"})}}),Object(l.createElement)(p.ToolbarButton,{icon:m,label:Object(s.__)("Align right"),isPressed:"right"==t.postTitleAlign,onClick:()=>{n({postTitleAlign:"right"})}})),Object(l.createElement)(p.RangeControl,{label:Object(s.__)("Max number of words"),value:r,onChange:e=>{n({postTitleLength:e})},min:1,max:10}),Object(l.createElement)(p.ToggleControl,{label:Object(s.__)("Display Post Author"),checked:i,disabled:!O,onChange:()=>{n({displayPostAuthor:!i})}}),Object(l.createElement)(p.ToggleControl,{label:Object(s.__)("Display Post Date"),checked:c,onChange:()=>{n({displayPostDate:!c})}}))});return Object(l.createElement)(p.Panel,null,Object(l.createElement)(p.PanelBody,{title:Object(s.__)("Post Title Settings"),initialOpen:!0},Object(l.createElement)(p.PanelRow,null,Object(l.createElement)(o,null))))}(w,e,t),function(e,t){const n=Object(c.withState)({displayPostContent:e.displayPostContent,postContentAlign:e.postContentAlign,displayPostContentRadio:e.displayPostContentRadio,postContentLength:e.postContentLength})(({displayPostContent:n,postContentAlign:o,displayPostContentRadio:a,postContentLength:r,setState:i})=>Object(l.createElement)("div",null,Object(l.createElement)(p.ToggleControl,{label:Object(s.__)("Display Post Content"),checked:n,onChange:()=>{t({displayPostContent:!n})}}),Object(l.createElement)(p.ToolbarGroup,{label:"Alignment"},Object(l.createElement)(p.ToolbarButton,{icon:u,label:Object(s.__)("Align left"),isPressed:"left"==e.postContentAlign,onClick:()=>{t({postContentAlign:"left"})}}),Object(l.createElement)(p.ToolbarButton,{icon:b,label:Object(s.__)("Align center"),isPressed:"center"==e.postContentAlign,onClick:()=>{t({postContentAlign:"center"})}}),Object(l.createElement)(p.ToolbarButton,{icon:m,label:Object(s.__)("Align right"),isPressed:"right"==e.postContentAlign,onClick:()=>{t({postContentAlign:"right"})}})),Object(l.createElement)(p.RadioControl,{label:"",selected:a,options:[{label:Object(s.__)("Post Content"),value:"content"},{label:Object(s.__)("Post Excerpt"),value:"excerpt"}],onChange:e=>{t({displayPostContentRadio:e})}}),Object(l.createElement)(p.RangeControl,{label:Object(s.__)("Max number of words"),value:r,onChange:e=>{t({postContentLength:e})},min:1,max:100})));return Object(l.createElement)(p.Panel,null,Object(l.createElement)(p.PanelBody,{title:Object(s.__)("Post Content Settings"),initialOpen:!0},Object(l.createElement)(p.PanelRow,null,Object(l.createElement)(n,null))))}(e,t),function(e,t){const n=Object(c.withState)({displayFeaturedImage:e.displayFeaturedImage,featuredImageSizeSlug:e.featuredImageSizeSlug,featuredImageAlign:e.featuredImageAlign,addLinkToFeaturedImage:e.addLinkToFeaturedImage})(({displayFeaturedImage:n,featuredImageSizeSlug:o,featuredImageAlign:a,addLinkToFeaturedImage:r,setState:i})=>Object(l.createElement)("div",null,Object(l.createElement)(p.ToggleControl,{label:Object(s.__)("Display Post Featured Image"),checked:n,onChange:()=>{t({displayFeaturedImage:!n})}}),Object(l.createElement)(p.SelectControl,{label:Object(s.__)("Image Size"),value:o,options:[{label:Object(s.__)("Thumbnail"),value:"thumbnail"},{label:Object(s.__)("Medium"),value:"medium"},{label:Object(s.__)("Large"),value:"large"}],onChange:e=>{t({featuredImageSizeSlug:e})}}),Object(l.createElement)(p.ToolbarGroup,{label:Object(s.__)("Alignment")},Object(l.createElement)(p.ToolbarButton,{icon:u,label:Object(s.__)("Align left"),isPressed:"left"==e.featuredImageAlign,onClick:()=>{t({featuredImageAlign:"left"})}}),Object(l.createElement)(p.ToolbarButton,{icon:b,label:Object(s.__)("Align center"),isPressed:"center"==e.featuredImageAlign,onClick:()=>{t({featuredImageAlign:"center"})}}),Object(l.createElement)(p.ToolbarButton,{icon:m,label:Object(s.__)("Align right"),isPressed:"right"==e.featuredImageAlign,onClick:()=>{t({featuredImageAlign:"right"})}})),Object(l.createElement)(p.ToggleControl,{label:Object(s.__)("Add link to Image"),checked:r,onChange:()=>{t({addLinkToFeaturedImage:!r})}})));return Object(l.createElement)(p.Panel,null,Object(l.createElement)(p.PanelBody,{title:Object(s.__)("Post Featured Image Settings"),initialOpen:!0},Object(l.createElement)(p.PanelRow,null,Object(l.createElement)(n,null))))}(e,t))),Object(l.createElement)("ul",o,C))}});class y extends React.Component{render(){const e=this.props.posts,t=this.props.authors,n=this.props.attributes,o=n.postTitleAlign,r=n.postTitleLength,s=n.displayPostAuthor,i=n.displayPostDate,c=n.displayPostContent,p=n.postContentAlign,d=n.displayPostContentRadio,u=n.postContentLength,b=n.displayFeaturedImage,m=n.featuredImageSizeSlug,O=n.featuredImageAlign,j=n.addLinkToFeaturedImage;let y="",h="",f="",_="",w="",C="",E="";return e?e&&0===e.length?E="No Post Found":e&&e.length>0&&(E=[],e.map((e,n)=>{y="",b&&0!=e.featured_media&&(y=Object(a.select)("core").getMedia(e.featured_media),y&&(h=y.media_details.sizes.thumbnail.source_url,"medium"==m&&y.media_details.sizes.medium?h=y.media_details.sizes.medium.source_url:"large"==m&&y.media_details.sizes.large&&(h=y.media_details.sizes.large.source_url),y=Object(l.createElement)("img",{key:"s2-wp-editor-blocks/post-"+e.id+"-featured-image",src:h})),y=j?Object(l.createElement)("a",{key:"s2-wp-editor-blocks/post-"+e.id+"-featured-image-link",href:e.link,style:{textAlign:O,display:"block"}},y):Object(l.createElement)("span",{key:"s2-wp-editor-blocks/post-"+e.id+"-featured-image-align",style:{textAlign:O,display:"block"}},y)),_="",s&&t&&(_=t.find(t=>t.id===e.author),_&&(_=Object(l.createElement)("span",{className:"wp-block-s2-wp-editor-blocks-post__post-author"},"by ",_.name))),w="",i&&e.date&&(w=Object(l.createElement)("time",{className:"wp-block-s2-wp-editor-blocks-post__post-date"},Object(g.date)("M, d Y",e.date))),f="",e.title.rendered&&(f=e.title.rendered,f=f.trim().split(" ",r).join(" "),f=Object(l.createElement)("span",{style:{textAlign:o,display:"block"}},Object(l.createElement)("a",{key:"s2-wp-editor-blocks/post-"+e.id+"-title-link",href:e.link},f),_,w)),C="",c&&e.content.rendered&&(C="content"===d?e.content.rendered:e.excerpt.rendered,C=C.trim().split(" ",u).join(" "),C=Object(l.createElement)("span",{dangerouslySetInnerHTML:{__html:C}}),C=Object(l.createElement)("span",{key:"s2-wp-editor-blocks/post-"+e.id+"-post-content-align",style:{textAlign:p,display:"block"}},C)),E[n]=Object(l.createElement)("li",{key:"s2-wp-editor-blocks/post-"+e.id,style:{listStyleType:"none"}},f,y,C)})):E="Loading...",E}}}]);